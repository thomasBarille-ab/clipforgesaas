{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"SELECT table_name FROM information_schema.tables WHERE table_schema = ''''public'''' ORDER BY table_name;\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"SELECT column_name, data_type, column_default, is_nullable FROM information_schema.columns WHERE table_schema = ''''public'''' AND table_name = ''''videos'''' ORDER BY ordinal_position;\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"SELECT column_name, data_type FROM information_schema.columns WHERE table_schema = ''''public'''' AND table_name = ''''videos'''' ORDER BY ordinal_position;\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"SELECT policyname, tablename, cmd FROM pg_policies WHERE schemaname = ''''public'''';\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"DROP POLICY IF EXISTS \\\\\"\"Users can insert their own videos\\\\\"\" ON public.videos; DROP POLICY IF EXISTS \\\\\"\"Users can view their own videos\\\\\"\" ON public.videos; DROP POLICY IF EXISTS \\\\\"\"Users can update their own videos\\\\\"\" ON public.videos; DROP TABLE IF EXISTS public.videos CASCADE;\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"CREATE TYPE public.plan_type AS ENUM \\(''''free'''', ''''pro'''', ''''business''''\\); CREATE TYPE public.video_status AS ENUM \\(''''uploaded'''', ''''processing'''', ''''ready'''', ''''failed''''\\); CREATE TYPE public.clip_status AS ENUM \\(''''pending'''', ''''generating'''', ''''ready'''', ''''failed''''\\); CREATE TYPE public.job_type AS ENUM \\(''''transcription'''', ''''clip_generation'''', ''''subtitle_burn''''\\); CREATE TYPE public.job_status AS ENUM \\(''''pending'''', ''''processing'''', ''''completed'''', ''''failed''''\\);\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"CREATE OR REPLACE FUNCTION public.handle_updated_at\\(\\) RETURNS TRIGGER AS $$ BEGIN NEW.updated_at = now\\(\\); RETURN NEW; END; $$ LANGUAGE plpgsql SECURITY DEFINER;\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"CREATE TABLE public.profiles \\( id uuid PRIMARY KEY REFERENCES auth.users\\(id\\) ON DELETE CASCADE, email text NOT NULL, full_name text, avatar_url text, plan public.plan_type NOT NULL DEFAULT ''''free'''', credits_remaining integer NOT NULL DEFAULT 10, stripe_customer_id text, stripe_subscription_id text, created_at timestamptz NOT NULL DEFAULT now\\(\\), updated_at timestamptz NOT NULL DEFAULT now\\(\\) \\); CREATE INDEX idx_profiles_plan ON public.profiles\\(plan\\); CREATE INDEX idx_profiles_stripe_customer ON public.profiles\\(stripe_customer_id\\) WHERE stripe_customer_id IS NOT NULL; ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY; CREATE POLICY \\\\\"\"Users can view their own profile\\\\\"\" ON public.profiles FOR SELECT TO authenticated USING \\(auth.uid\\(\\) = id\\); CREATE POLICY \\\\\"\"Users can update their own profile\\\\\"\" ON public.profiles FOR UPDATE TO authenticated USING \\(auth.uid\\(\\) = id\\) WITH CHECK \\(auth.uid\\(\\) = id\\); CREATE TRIGGER profiles_updated_at BEFORE UPDATE ON public.profiles FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at\\(\\);\"\"}')",
      "Bash(curl -s -X POST \"https://api.supabase.com/v1/projects/hwaixbtwpnlxtlsqzxno/database/query\" -H \"Authorization: Bearer sbp_bf016c2c2c54ea5cca7359480714be3a6f05c580\" -H \"Content-Type: application/json\" -d '{\"\"query\"\": \"\"CREATE OR REPLACE FUNCTION public.handle_new_user\\(\\) RETURNS TRIGGER AS $$ BEGIN INSERT INTO public.profiles \\(id, email, full_name, avatar_url\\) VALUES \\( NEW.id, NEW.email, COALESCE\\(NEW.raw_user_meta_data ->> ''''full_name'''', ''''''''\\), COALESCE\\(NEW.raw_user_meta_data ->> ''''avatar_url'''', ''''''''\\) \\); RETURN NEW; END; $$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public; CREATE TRIGGER on_auth_user_created AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION public.handle_new_user\\(\\);\"\"}')",
      "Bash(curl:*)"
    ]
  }
}
